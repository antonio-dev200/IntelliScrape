### **IntelliScrape 产品需求文档**

| 版本 | 日期 | 作者 | 状态 |
| :---- | :---- | :---- | :---- |
| V1.0 | 2025年8月13日 | Gemini | 最终版 |

#### **1\. 项目概述**

IntelliScrape 旨在成为一个智能化的**数据资产构建与分析平台**。它将通过一个标准化的、可扩展的工作流，持续地从全网采集多样化的外部数据集，并将其结构化地存入内部数据库，为后续的深度分析提供高质量的数据支持。

#### **2\. 核心功能需求**

##### **2.1. 主题配置与标准化 (Theme Configuration & Standardization)**

| Epic | 配置一个新的数据采集主题 |
| :---- | :---- |
| **用户故事** | 1\. **(发起主题配置)** 作为一个管理员，当我需要采集一类新的数据时（如“公司财报”），我希望能发起一个“**主题配置**”流程。在此流程中，我需要输入一个**主题名称**，并**一次性勾选**所有我已知的、包含这类数据的**数据来源**（如网站A、B、C）。\<br\>2. **(自动分析)** 在我提交后，作为系统，你需要为我勾选的每一个网站**自动、并行地**进行AI分析，找出每个网站上所有可用的字段及其抓取规则。\<br\>3. **(全局标准化)** 当所有网站都分析完成后，作为系统，你需要提供一个“**标准化工作台**”。在这个界面上，你需要：a) 将所有网站分析出的字段进行**全局归并**；b) 根据字段的出现频率和名称相似度，**智能推荐**哪些字段适合作为“标准字段”；c) 如果这个主题之前已经有标准字段，你需要将新发现的字段与**已有标准**进行匹配推荐。\<br\>4. **(审核与确认)** 作为一个管理员，我需要能在“标准化工作台”上进行最终决策，包括：a) **采纳**系统的推荐；b) 手动将某些字段**提升**为标准字段；c) 将新发现的字段**映射**到已有的标准字段上；d) 将某些字段**忽略**为特定网站的“特有字段”。\<br\>5. **(生成配置)** 在我确认后，作为系统，你需要为我勾选的每一个网站自动生成并保存最终的**抓取配置 (Crawl Config)**，并正式创建或更新这个主题的**标准数据集 (Standard Dataset)**。 |
| **验收标准** | \- “主题配置”流程支持批量、并行的AI分析。\<br\>- “标准化工作台”能有效地对多源字段进行归并、推荐和映射。\<br\>- 系统能正确处理“首次创建”和“增量更新”两种标准化场景。\<br\>- 流程结束后，所有相关的standard\_datasets, standard\_fields, crawl\_configs记录被正确创建或更新。 |

##### **2.2. 抓取任务管理与执行 (Crawl Task Management & Execution)**

| Epic | 执行一个数据采集任务 |
| :---- | :---- |
| **用户故事** | 1\. **(创建任务)** 作为一个管理员，在“公司财报”这个主题已经配置完成后，我希望能创建一个**抓取任务**。创建时，我需要：a) 为任务命名（如“每日财报采集”）；b) 指定它关联到“公司财报”这个**标准数据集**；c) 从该主题下所有**已配置好**的来源中，勾选本次任务需要执行的网站（如网站A、网站C）。\<br\>2. **(调度与执行)** 作为一个管理员，我需要能设定任务的执行计划（如“一次性”或“每日执行”）。作为系统，你需要根据计划，自动、可靠地执行任务。\<br\>3. **(防御性检查)** 作为系统，在执行任务的瞬间，你需要再次检查其关联的每个网站的抓取配置是否依然有效和激活。对于无效的配置，你需要能优雅地跳过并记录日志，而不是让整个任务失败。 |
| **验收标准** | \- 抓取任务的创建依赖于已完成的“主题配置”。\<br\>- 系统能根据调度计划自动执行任务，并将任务分解为针对多个来源的子任务。\<br\>- 系统在执行时能处理配置失效等异常情况。 |

